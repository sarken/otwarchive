<!--Descriptive page name, messages and instructions-->
<h2 class="heading">
  <% if @user %>
    <%= t(".user.page_heading", username: @user.login) %>
  <% elsif @work %>
    <%= t(".work.page_heading_html", work_link: link_to(@work.title, @work)) %>
  <% else %>
    <%= t(".collection.page_heading_html", collection_link: link_to(@collection.title, @collection)) %>
  <% end %>
</h2>
<!--/descriptions-->
<!--subnav-->
<% unless @work %>
  <%
    base_path = @user ? user_collection_items_path(@user) : collection_items_path(@collection)
    approved_path = @user ? user_collection_items_path(@user, approved: true) : collection_items_path(@collection, approved: true)
    rejected_path = @user ? user_collection_items_path(@user, rejected: true) : collection_items_path(@collection, rejected: true)
  %>

  <ul class="navigation actions" role="navigation">
    <li><%= span_if_current ts("Awaiting Approval"), base_path, !(params[:rejected] || params[:approved] || params[:invited]) %></li>
    <% unless @user %>
      <li><%= span_if_current ts("Invited"),  base_path + "?invited=true"  %></li>
    <% end %>
    <li><%= span_if_current ts("Rejected"), rejected_path %></li>
    <li><%= span_if_current ts("Approved"), approved_path %></li>
  </ul>
<% end %>
<!--/subnav-->

<% if params[:invited] %>
  <p class="notice">
    <%= ts("Works listed here have been invited to this collection. Once a work's creator has approved inclusion in this collection, the work will be moved to 'Approved'.") %>
  </p>
<% end %>
<% if @collection_items.count < 1 %>
  <p class="note"><%= ts("Nothing to review here!") %></p>
<% else %>

  <% form_action = if @user
                      update_multiple_user_collection_items_path(@user)
                    elsif @work
                      update_multiple_work_collection_items_path(@work)
                    else
                      update_multiple_collection_items_path(@collection)
                    end %>
  <%= form_tag form_action, method: :patch do %>
    <ul class="index group">
      <% @collection_items.each do |collection_item| %>
        <%= render 'item_fields', collection_item: collection_item %>
      <% end %>
    </ul>
    <%= submit_fieldset %>
  <% end %>

  <% unless @user %>
    <%= will_paginate @collection_items %>
  <% end %>
<% end %>
<!--/content-->

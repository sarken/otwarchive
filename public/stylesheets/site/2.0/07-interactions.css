/*==INTERACTIONS: global form rules
http://otwcode.github.com/docs/front_end_coding/patterns/interactions
(submit button styling is in actions.css with the other buttons)
General rules for all form elements, and nearly ALL our forms use just these. 
Forms are normally in definition lists <dt label: dd input>
with some un/ordered lists, normally of checkbox options <li checkbox:label>
and some paragraphs, normally forms with a single <p label:input> .

We might develop three MODES: .simple .verbose and .dynamic -- .sim and ver in early draft in sandbox
We also have some jS WIDGETS, which are custom form interactions, like autocomplete 
and a few variations for INTERACTION TYPES, which are, roughly:
.post, .login, make .associations, set .preferences, [.search, .filter] => in searchbrowse
*/

form:not(.restructured) {
  clear: right;
}

/* wrap long text in Opera, Safari, and Chrome */
form:not(.restructured) fieldset {
  min-width: 0;
}

/*Guideline: Forms are written by lots of people, and, this is beta, change a LOT. 
I've written a load of possible different nests to give a reasonably/broadly consistent view whatever goes in, 
but it's probably not complete. */

form:not(.restructured) fieldset, form:not(.restructured) dl, form:not(.restructured) fieldset dl dl, form:not(.restructured) fieldset fieldset fieldset, form:not(.restructured) fieldset fieldset dl dl, form:not(.restructured) dd.hideme, form:not(.restructured) blockquote.userstuff {
  display: block;
  background: #ddd;
  border: 2px solid #f3efec;
  margin: 0.643em;
  padding: 0.643em;
    box-shadow: inset 1px 0 5px #999;
}

form:not(.restructured) fieldset dl, form:not(.restructured) fieldset.actions, form:not(.restructured) fieldset dl fieldset dl {
  background: transparent;
  border: none;
  clear: right;
    box-shadow: none;
}

form:not(.restructured) fieldset fieldset, form:not(.restructured) fieldset dl dl, form:not(.restructured) blockquote.userstuff {
  background: #fff;
  clear: right;
}

form:not(.restructured) fieldset dd dl, form:not(.restructured) .meta dd, form:not(.restructured) fieldset dl fieldset dl, form:not(.restructured) dd fieldset {
  margin: 0.643em 0;
}

/*end nesting */

form:not(.restructured) legend, form:not(.restructured) input[type="hidden"] {
  height: 0;
  width: 0;
  font-size: 0;
  opacity: 0;
  padding: 0;
  margin: 0;
}

form:not(.restructured) label {
  cursor: pointer;
  margin-right: 0.375em;
}

form:not(.restructured) input, form:not(.restructured) textarea {
  font: 100% 'Lucida Grande', 'Lucida Sans Unicode', 'GNU Unifont', Verdana, Helvetica, sans-serif;
  width: 100%;
  border: 1px solid #bbb;
    box-shadow: inset 0 1px 2px #ccc;
}

form:not(.restructured) textarea {
  min-height: 12em;
}

form:not(.restructured) textarea.large {
  height: 36em;
}

form:not(.restructured) input:focus, form:not(.restructured) select:focus, form:not(.restructured) textarea:focus {
  background: #f3efec;
}

form:not(.restructured) input[type="radio"] + label, form:not(.restructured) input[type="checkbox"] + label {
  padding-left: 1em;
}

form:not(.restructured) select {
  vertical-align: text-top;
  width: 100%;
  min-width: 10.5em;
}

form:not(.restructured) .datetime select {
  width: 32.5%;
}

form:not(.restructured) input[type="radio"], form:not(.restructured) input[type="checkbox"], form:not(.restructured) input[type="file"], form:not(.restructured) input.number, form:not(.restructured) p input, form:not(.restructured) p select, form:not(.restructured) .heading select, form:not(.restructured) li select {
  width: auto;
  margin-right: 0.375em;
}

form:not(.restructured) input.number {
  width: 4em;
}

form:not(.restructured) option, form:not(.restructured) .actions option, form:not(.restructured) code {
  display: block;
}

form:not(.restructured) p {
  clear: right;
  margin: auto;
  padding: 0.643em;
}

form:not(.restructured) dt {
  float: left;
  clear: left;
  min-width: 10.5em;
  width: 25%;
  padding: 0.25em 0.5625em 0 0;
  border-bottom: 1px solid #f3efec;
}

form:not(.restructured) dd, form:not(.restructured) dd.any {
  float: left;
  width: 72.5%;
}

form:not(.restructured) dd.any {
  margin-left: 25%;
}

form:not(.restructured) dd + dd {
  width: 97.5%;
  margin-left: 0.5625em;
}

form:not(.restructured) dd.required {
  color: #2a2a2a;
}

form:not(.restructured) .footnote code {
  display: inline;
}

/* when we display information that cannot be edited, 
like the current username on the change username form */
form:not(.restructured) dd p.informational {
  padding-top: 0;
}

/*END FORM RULES*/

/* WIDGET: DEPENDENT OPTIONS */
form:not(.restructured) .toggle_formfield ~ ul.dependent {
  margin-left: 2.625em;
}

/* WIDGET: CHARACTER COUNTER (todo: ARIA live region POLITE)*/

form:not(.restructured) p.character_counter {
  font-size: 87.5%;
  text-align: right;
}

.comment form:not(.restructured) .character_counter {
  float: left;
}

/* WIDGET: LIVE VALIDATION (todo: ARIA live region)
We only use error messages for LiveValidation. Style spoofs the system error message. If we ever set a default success message, this will need updating. */

.LV_validation_message {
  font-weight: 900;
  position: absolute;
}

.LV_invalid {
  background: #efd1d1;
  border: 1px solid #900;
  color: #900;
  margin: 0.643em auto;
  padding: 0.25em 0.375em;
    box-shadow: 1px 1px 2px;
    border-radius: 0.25em;
}

.LV_invalid_field, input.LV_invalid_field:hover, input.LV_invalid_field:active, textarea.LV_invalid_field:hover, textarea.LV_invalid_field:active {
  border: 1px solid #c00;
}

.LV_invalid:before {
  border-color: #900 transparent;
  border-style: solid;
  border-width: 0 0.643em 0.643em;
  content: "";
  left: 0.875em;
  position: absolute;
  top: -0.643em;
}

/* WIDGET: AUTO COMPLETE */

.autocomplete div.dropdown ul {
  background: #fff;
  border: 1px solid #eee;
  padding: 0.125em;
  line-height: 1.286;
  color: #000;
  display: block;
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 1px 3px 5px rgba(0, 0, 0, 0.5);
}

.autocomplete ul li {
  padding: 0.125em;
  margin: 0.25em auto auto;
}

.autocomplete input, .autocomplete .dropdown ul li {
  display: block;
  min-width: 10em;
}

.autocomplete .dropdown ul li {
  margin: 0.25em 0 0;
}

form:not(.restructured) li ul.autocomplete li.input {
  border: 0;
}

.autocomplete .dropdown ul li:hover, li.selected {
  background: url("/images/skins/textures/tiles/red-ao3.png") top left #900;
  color: #fff;
}

.required .autocomplete, .autocomplete .notice {
  color: #2a2a2a;
}

.autocomplete .notice {
  margin-top: 0 !important;
}

.autocomplete li.added, .post .meta dd ul li.added {
  display: inline-block;
}

/* WIDGET: SORTABLE LIST (note: hope to merge with .sortable and .draggable etc)*/

.ui-sortable li {
  background: #eee;
  border: 2px solid #ddd;
  float: left;
  width: 100%;
  clear: both;
    box-shadow: 1px 1px 3px transparent;
}

.ui-sortable li:hover {
  background: #ddd;
  border: 2px solid #999;
  cursor: move;
    box-shadow: 1px 1px 3px #bbb;
}

.ui-sortable input {
  margin: 0.429em 0 0.25em 0.25em;
}

.ui-sortable .heading {
  display: inline-block;
}

.ui-sortable ul.actions li {
  float: none;
  background: transparent;
  border: none;
}

.ui-draggable form {
  cursor: move;
    box-shadow: 0 0 3px #555;
}

/* WIDGET: DATEPICKER, TIMEPICKER (todo, requires ARIA managed focus) */

#ui-datepicker-div {
  background: #fff;
  display: none;
  overflow: hidden;
  padding: 0.643em;
  font-size: 87.5%;
    box-shadow: 3px 3px 5px;
}

.ui-datepicker dt, .ui-datepicker dd, .ui-datepicker-buttonpane, .ui-timepicker-div, a.ui-datepicker-prev {
  float: left;
}

.ui-datepicker button {
  height: 2em;
}

.ui-datepicker dt {
  clear: left;
  width: 5em;
  margin: 0.25em 0;
}

.ui-datepicker dd {
  margin: 0.25em 0;
}

.ui-datepicker table {
  background: #eee;
}

.ui-datepicker td {
  border: 1px solid #aaa;
}

.ui-datepicker tr:hover {
  background: #ddd;
}

.ui-datepicker td:hover {
  background: #fff;
}

.ui-datepicker td a {
  border-bottom: none;
}

a.ui-datepicker-next {
  float: right;
}

.ui-datepicker-title {
  clear: both;
  text-align: center;
}

.ui-datepicker-buttonpane {
  clear: left;
}

.ui-timepicker-div dl {
  float: left;
  margin: 0.643em 0;
}

.ui_tpicker_hour_label, .ui_tpicker_minute_label {
  padding-top: 0.25em;
  height: 1.45em;
}


/*WIDGET: TOOLTIP (todo, requires graceful degradation testing, can't see any reason for this jS)
qTip2 Copyright 2009-2010 Craig Michael Thompson - http://craigsworks.com*/

.qtip {
  position: absolute;
  left: -28000px;
  top: -28000px;
  display: none;
  max-width: 22em;
  min-width: 6em;
  font-size: 0.625em;
  z-index: 15000;
}

.qtip-content {
  position: relative;
  padding: 0.15em 0.25em;
  background: #d1e1ef;
  border: 1px solid #c2d2df;
  overflow: hidden;
    word-wrap: break-word;
}

/* WIDGET: MODAL DIALOGS (called by help links) */

a.modal.help { 
  cursor: help;
}

#modal-bg, #modal-wrap {
  display: none;
  height: 100%;
  left: 0;
  top: 0;
}

#modal-bg {
  background: rgba(0, 0, 0, 0.7);
  position: fixed;
  width: 100%;
  z-index: 499;
}

#modal-bg .loading {
  background: url(/images/indicator.gif) no-repeat center center;
  height: 124px;
  left: 50%;
  margin: -62px 0 0 -62px;
  position: absolute;
  top: 50%;
  width: 124px;
}

#modal-wrap { 
  display: none;
  position: absolute;
  right: 0;
  text-align: center;
  z-index: 500;
}

#modal-wrap:before {
  content: '';
  height: 100%;
}

#modal-wrap:before, #modal { 
  display: inline-block;
  vertical-align: middle;
}

#modal {
  background: #fff;
  border: 10px solid #eee;
  margin: 3% 0;
  max-width: 800px;
  min-width: 200px;
  padding-bottom: 44px;
  position: relative;
  text-align: left;
  width: 80%; 
  z-index: 501;
    box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.2);
}

#modal .content {
  border-bottom: 1px solid #ccc;
  font-size: 0.875em;
  overflow: auto;
  padding: 1.5em;
}

#modal.tall {
  height: 80%;
  max-height: 720px;
}

#modal.tall.img {
  min-width: 0;
  width: auto;
}

#modal.tall .content {
  bottom: 44px;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
}

#modal.img {
  background: transparent;
  border: 0;
  margin: 0 0 44px;
  max-height: none;
  max-width: 90%;
  min-width: 0;
  padding: 0;
  width: auto;
    box-shadow: none;
}

#modal.img a {
  border: 0;
  color: #fff;
}

#modal.img.tall {
  height: 90%;
  width: auto;
}

#modal.img .content { 
  border: 0;
  overflow: visible;
  padding: 0;
  text-align: center;
}

#modal.img.tall .content {
  height: 100%;
  position: relative;
  width: auto;
}

#modal.img .content img {
  border: 1px solid rgba(0, 0, 0, 0.5);
  max-height: 100%;
  max-width: 100%;
    box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.2);
}

#modal .footer {
  bottom: 0;
  height: 44px;
  left: 0;
  line-height: 44px;
  padding: 0 0.6432em;
  right: 0;
  position: absolute;
}

#modal.img .footer {
  background: rgba(0, 0, 0, 0.6);
  color: #fff;
  position: fixed;
  text-align: center;
    box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.2);
}

#modal .footer .action.modal-closer {
  bottom: 8px;
  position: absolute;
  right: 8px;
}

#modal .content > h1:first-child, #modal .content > h2:first-child, #modal .content > .heading:first-child { 
  margin-top: 0.5em;
}

/*MODE: DYNAMIC is in early dev and so currently sharing styles with toggled */

div.dynamic {
  background: #fff;
  position: absolute;
  z-index: 500;
}

/*MODE: VERBOSE for forms with more than three fieldsets 
TO DO: Make VERBOSE a class on FORM across the site; it is a surrounding DIV
in some areas, hence .verbose form */

form.verbose:not(.restructured) legend, .verbose form:not(.restructured) legend {
  height: auto;
  width: auto;
  font-size: 100%;
  background: #fff;
  border: 2px solid #ddd;
  padding: 0.5em;
    box-shadow: 1px 2px 3px #999;
    opacity: 1;
}

/*MODE: SIMPLE for forms with three or fewer fieldsets (default) */

form.simple:not(.restructured) span.actions {
  float: none;
}

form.simple:not(.restructured) input[type="submit"] {
  margin: 0;
}

/* WIDGET: TOGGLED FORMS (SHOW/HIDE bookmark and collection - hidden with jS) */

.toggled form:not(.restructured) dd, .dynamic form:not(.restructured) dd {
  width: 99%;
}

.toggled form:not(.restructured) p.footnote, .dynamic form:not(.restructured) p.footnote {
  float: none;
  margin: auto;
  padding: 0;
  line-height: 0.5;
}

.toggled form:not(.restructured), .dynamic form:not(.restructured) {
  padding: 0.5em;
  border: 2px solid #ccc;
  background: #fff;
    box-shadow: 1px 2px 5px;
}

.dynamic form:not(.restructured) fieldset, .toggled form:not(.restructured) fieldset, .toggled form:not(.restructured) dl, .secondary .toggled form:not(.restructured), .secondary form:not(.restructured) {
  border: none;
  background: transparent;
  margin: 0;
  padding: 0;
    box-shadow: none;
}

.toggled .bookmark form:not(.restructured) p.footnote {
  padding-bottom: 0.643em;
}

/*INTERACTION: LOGIN SIGNUP*/

/*INTERACTION: POST (work, chapter, comment, news, feedback, challenge etc) */

.post .required .warnings, dd.required {
  font-weight: normal;
  color: #2a2a2a;
}

.post .text textarea {
  clear: right;
}

/* CONTEXT: dashboard*/

.dashboard > form:not(.restructured) {
  float: left;
  width: 100%;
}

.dashboard fieldset {
  clear: right;
}

/***** NEW FORMS WITHOUT DEFINITION LIST STRUCTURE *****/

form.restructured {
  font-size: 1rem;
}

form.restructured fieldset > div {
  margin: 1.643em 0.875em;
}

form.restructured fieldset fieldset {
  margin: 0;
}

/* lists inside nested fieldsets are vertical */
form.restructured fieldset fieldset li {
  display: block;
}

form.restructured label {
  font-weight: bold;
}

form.restructured fieldset fieldset label {
  font-weight: 500;
}

/* override to prevent weird spacing on tag fields */
form.restructured .meta ul li.input {
  padding: 0;
}

/*END== */
